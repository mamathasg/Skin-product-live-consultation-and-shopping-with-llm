{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h3 class="fw-bold mb-4">My Orders</h3>

  {% if orders %}
  {% for order in orders %}
  <div class="card mb-4 shadow-sm border-0">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="mb-0 text-primary">Order #{{ order.ord_id }}</h5>
        <span class="badge {% if order.status == 'Delivered' %}bg-success{% elif order.status == 'Shipped' %}bg-info{% else %}bg-warning text-dark{% endif %}">
          {{ order.status }}
        </span>
      </div>

      <p class="mb-1"><strong>Date:</strong> {{ order.ord_date.strftime('%Y-%m-%d %H:%M:%S') }}</p>
      <p class="mb-1"><strong>Total:</strong> ${{ "%.2f"|format(order.total_amount) }}</p>
      <p class="mb-1"><strong>Quantity:</strong> {{ order.ord_quantity }}</p>

      <hr>

      <h6 class="fw-bold">Delivery Address</h6>
      <p class="mb-0 small text-muted">
        {{ order.full_name }}<br>
        {{ order.street_address }}, {{ order.city }}, {{ order.state }} {{ order.zip_code }}<br>
        {{ order.country }}
      </p>

      <hr>

      <!-- Tracking Progress -->
      <h6 class="fw-bold mb-2">Order Tracking</h6>
      <div class="progress mb-2" style="height: 8px;">
        {% if order.status == 'Placed' %}
          <div class="progress-bar bg-warning" style="width: 25%;"></div>
        {% elif order.status == 'Shipped' %}
          <div class="progress-bar bg-info" style="width: 65%;"></div>
        {% elif order.status == 'Delivered' %}
          <div class="progress-bar bg-success" style="width: 100%;"></div>
        {% else %}
          <div class="progress-bar bg-secondary" style="width: 15%;"></div>
        {% endif %}
      </div>

      <p class="small text-muted">
        {% if order.status == 'Placed' %}
          Your order has been placed and will ship soon.
        {% elif order.status == 'Shipped' %}
          Your order is on the way! Expect delivery within 2–3 days.
        {% elif order.status == 'Delivered' %}
          Your order has been delivered successfully.
        {% else %}
          Awaiting confirmation.
        {% endif %}
      </p>
    </div>
  </div>
  {% endfor %}
  {% else %}
  <div class="alert alert-info">You haven’t placed any orders yet.</div>
  {% endif %}
</div>
{% endblock %}
